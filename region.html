

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The Region &mdash; NeuroHDF v0.1 documentation</title>
    <link rel="stylesheet" href="_static/navy.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="NeuroHDF v0.1 documentation" href="index.html" />
    <link rel="next" title="Cookbook - Spatio-Temporal datasets" href="cookbook_spatiotempo.html" />
    <link rel="prev" title="Hierarchical Layout: Global Metadata" href="hierarchy.html" />
 
<script type="text/javascript">


  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-17713054-4']);
  _gaq.push(['_trackPageview']);

  (function() {
   var ga = document.createElement('script');
   ga.src = ('https:' == document.location.protocol ?
             'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
   ga.setAttribute('async', 'true');
   document.documentElement.firstChild.appendChild(ga);
 })();

</script>

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="cookbook_spatiotempo.html" title="Cookbook - Spatio-Temporal datasets"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="hierarchy.html" title="Hierarchical Layout: Global Metadata"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">NeuroHDF v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="hierarchy.html"
                        title="previous chapter">Hierarchical Layout: Global Metadata</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="cookbook_spatiotempo.html"
                        title="next chapter">Cookbook - Spatio-Temporal datasets</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="the-region">
<span id="region"></span><h1>The Region<a class="headerlink" href="#the-region" title="Permalink to this headline">Â¶</a></h1>
<p>We represent the unifying concept of a 3D spatial reference frame in NeuroHDF as a <em>Region</em>. A Region is the container
for spatio-temporal datasets and is mapped to a HDF Group node with Region-based metadata.</p>
<p>NeuroHDF node for a Region:</p>
<div class="highlight-python"><pre>Group["My Region Name"]
.attrs["type"] = "Region"
.attrs["affine"] -&gt; array, shape (4,4) for affine transformation matrix
.attrs["origin_info"] = {
    "name" : "anterior commisure",
    "ref" : "UMLSCUI:C0152335"
}
.attrs["axes_info"] = {
    0 : { "positive" : {"name" : "right", "ref" : "BSPO:0000007"},
          "negative" : {"name" : "left", "ref" : "BSPO:0000000"}
        },
    1 : { "positive" : {"name" : "anterior", "ref" : "BSPO:0000055"},
          "negative" : {"name" : "posterior", "ref" : "BSPO:0000025"}
        },
    2 : { "positive" : {"name" : "dorsal", "ref" : "BSPO:0000063"},
          "negative" : {"name" : "ventral", "ref" : "BSPO:0000068"}
        }
}
.attrs["axes_units"] = {
    0 : {"name" : "x", "unit" : {"name": "mm", "ref" : "UO:0000016"} },
    1 : {"name" : "y", "unit" : {"name": "mm", "ref" : "UO:0000016"} },
    2 : {"name" : "z", "unit" : {"name": "mm", "ref" : "UO:0000016"} },
}

# now, the datasets ...

    Group["Regular data block"] ...
    Group["3D Skeletons"] ...
    ...</pre>
</div>
<p>A <em>Region</em> contains spatio-temporal datasets that are spatially transformed relative to the local coordinate system
defined by the <em>Region</em>.</p>
<p>The datasets are either regular or irregular:</p>
<img alt="_images/region1.png" src="_images/region1.png" />
<p>We need to establish a basic convention for a global coordinate system, defining the axes order,
naming convention and orientation, to be able to interpret the affine transformation associated with each Region:</p>
<ul class="simple">
<li>first spatial direction, usually named <em>x</em></li>
<li>second spatial direction, usually named <em>y</em></li>
<li>third spatial direction, usually named <em>z</em></li>
</ul>
<p>Each Region is spatially embedded with an affine transformation from its parent coordinate system to its own (local)
coordinate system. Because the root Region in the hierarchy has no parent Region, the parent coordinate system is
defined by convention as a Left-Hand-Coordinate system, where the first spatial direction is to the right (x),
the second spatial direction is upwards (y) and the third spatial direction is forward (z). We call this global
coordinate system root coordinate system in the following.</p>
<p>The root Region node in the NeuroHDF hierarchy contains an affine transformation that might reorder
the convention root coordinate system. Note that the semantics given to the coordinate axes (their label) applie
to the coordinate axes AFTER the affine transformation from its parent coordinate system.</p>
<p>We use the <a class="reference external" href="http://obofoundry.org/cgi-bin/detail.cgi?id=spatial">OBO Spatial Ontology</a> as identifiers to complement
the human-readable string identifiers denoting axes interpretation.</p>
<p>The affine transformation not only specifies the orientation of the axes, but also the location of origo. This corresponds
to the translation (the translational part of the affine) of origo from the root-convention coordinate system to the Region
origo. Similarly, we want to know the meaning of origo in the Region coordinate system, such as the anatomically identified
location in a template atlas. Often, particular neuroanatomical landmarks are used to define the origo. Optimally, they
should be very stable and recognizable across individuals. For instance, in the Waxholm space, origo is defined at
<a class="reference external" href="http://en.wikipedia.org/wiki/Bregm">Bregma</a>
which is the anatomical point on the skull at which the coronal suture is intersected perpendicularly by the sagittal suture.</p>
<p>Furthermore, the metric unit for unity of each spatial direction is defined. We use the
<a class="reference external" href="http://www.obofoundry.org/cgi-bin/detail.cgi?id=unit">OBO Units of measurements Ontology</a>
where &#8220;milimeter&#8221; is identified with &#8220;UO:0000016&#8221;.</p>
<p>An optional metadata field specifies an axis-aligned bounding box by two points, where the axes are aligned to the
axes of the <em>Region</em> coordinate system. This basically defines the maximal spatial extent of the <em>Region</em>, but it
is not guaranteed to be correct. As we will see, <em>Regions</em> can contain other Regions, but also datasets. These
datasets can change over time, thus changing in its spatial configuration over time. The bounding-box would then
either denote the maximum bounding box at the first time frame, or alternatively be the maximum bounding box
across all time frames.</p>
<p>Each dataset specifies an affine transformation from its embedding <em>Region</em> (in addition to the affine specified
for the Region). The affine for Irregular datasets is the identity when the dataset&#8217;s spatial location of the vertices
are already relative to the <em>Region</em> coordinate system. For regular datasets, the homogenous array can contain an arbitrary
number of dimensions, but it requires to have at least one spatial dimension to meaningfully be a child
of a <em>Region</em>. For the affine of a Regular dataset, only the spatial dimension of the array are relevant
for the embedding within the <em>Region</em>.</p>
<p>See section <a class="reference internal" href="cookbook_spatiotempo.html#spatiotempo"><em>Cookbook - Spatio-Temporal datasets</em></a>  for details on the dataset representation.</p>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="cookbook_spatiotempo.html" title="Cookbook - Spatio-Temporal datasets"
             >next</a> |</li>
        <li class="right" >
          <a href="hierarchy.html" title="Hierarchical Layout: Global Metadata"
             >previous</a> |</li>
        <li><a href="index.html">NeuroHDF v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, NeuroHDF Developers.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>